{"theme":null,"config":{"padding":{"name":"Padding","type":[{"name":"Number","level":3}],"default":10,"rebindOnChange":true,"value":10},"margin":{"name":"Margin","type":[{"name":"Number","level":3}],"default":10,"value":"10"},"palette":{"name":"Palette","type":[{"name":"Palette","level":5,"re":{},"default":{"colors":[{"hex":"#1d3263"},{"hex":"#226c87"},{"hex":"#f8d672"},{"hex":"#e48e11"},{"hex":"#e03215"},{"hex":"#ab2321"}]},"plotdb":{"colors":[{"hex":"#ed1d78"},{"hex":"#c59b6d"},{"hex":"#8cc63f"},{"hex":"#28aae2"}]},"qualitative":{"colors":[{"hex":"#c05ae0"},{"hex":"#cf2d0c"},{"hex":"#e9ab1e"},{"hex":"#86ffb5"},{"hex":"#64dfff"},{"hex":"#003f7d"}]},"binary":{"colors":[{"hex":"#ff8356"},{"hex":"#0076a1"}]},"sequential":{"colors":[{"hex":"#950431"},{"hex":"#be043e"},{"hex":"#ec326d"},{"hex":"#fc82a9"},{"hex":"#febed2"},{"hex":"#fee6ee"}]},"diverging":{"colors":[{"hex":"#74001a"},{"hex":"#cd2149"},{"hex":"#f23971"},{"hex":"#ff84ab"},{"hex":"#ffc3d7"},{"hex":"#f2f2dd"},{"hex":"#b8d9ed"},{"hex":"#81b1d0"},{"hex":"#3d8bb7"},{"hex":"#0071a8"},{"hex":"#003558"}]},"subtype":{"qualitative":"qualitative","binary":"binary","sequential":"sequential","diverging":"diverging"}}],"default":{"colors":[{"hex":"#1d3263"},{"hex":"#226c87"},{"hex":"#f8d672"},{"hex":"#e48e11"},{"hex":"#e03215"},{"hex":"#ab2321"}]},"value":{"colors":[{"hex":"#1d3263"},{"hex":"#226c87"},{"hex":"#f8d672"},{"hex":"#e48e11"},{"hex":"#e03215"},{"hex":"#ab2321"}]}}},"dimension":{"name":{"type":[],"require":true,"desc":"name of station"},"longitude":{"type":[{"name":"Number","level":3}],"require":false,"desc":"longitude of station"},"latitude":{"type":[{"name":"Number","level":3}],"require":false,"desc":"latitude of station"},"value":{"type":[{"name":"Number","level":3}],"require":false,"desc":"circle radius of station"},"destination":{"type":[],"require":true,"desc":"comma separated names of destination station"},"date":{"type":[{"name":"Date","level":2}],"require":false,"desc":"operational date"},"category":{"type":[],"require":false,"desc":"category of this station"}},"data":[],"type":{"location":"server","name":"chart"},"owner":"o3tgs6","key":"1swey44","permission":{"switch":["public"],"value":[{"switch":"public","perm":"fork"}]},"name":"Subway Map","desc":"an abstract subway map that focuses in relationship instead of correctness in geographic.","tags":[""],"doc":{"name":"document","type":"html","content":"","lines":1,"size":0},"style":{"name":"stylesheet","type":"css","content":"","lines":1,"size":0},"code":{"name":"code","type":"javascript","content":"var module = {};\nmodule.exports = plotdb.chart.create({\n  sample: [{\"category\":\"象山線\",\"destination\":\"紅樹林\",\"value\":14237028,\"latitude\":25.1677926207002,\"longitude\":121.44588548081808,\"name\":\"淡水\"},{\"category\":\"象山線\",\"destination\":\"淡水,竹圍\",\"value\":2570229,\"latitude\":25.153907731480547,\"longitude\":121.45850706420599,\"name\":\"紅樹林\"},{\"category\":\"象山線\",\"destination\":\"紅樹林,關渡\",\"value\":3489233,\"latitude\":25.13673407407103,\"longitude\":121.45940124149244,\"name\":\"竹圍\"},{\"category\":\"象山線\",\"destination\":\"竹圍,忠義\",\"value\":4322316,\"latitude\":25.125540623211034,\"longitude\":121.46674513999207,\"name\":\"關渡\"},{\"category\":\"象山線\",\"destination\":\"關渡,復興崗\",\"value\":968832,\"latitude\":25.131152572364577,\"longitude\":121.47319695630772,\"name\":\"忠義\"},{\"category\":\"象山線\",\"destination\":\"忠義,北投\",\"value\":1223170,\"latitude\":25.137286728558433,\"longitude\":121.48521291909451,\"name\":\"復興崗\"},{\"category\":\"象山線\",\"destination\":\"復興崗,奇岩,新北投\",\"value\":6435609,\"latitude\":25.13242744992672,\"longitude\":121.49813694913605,\"name\":\"北投\"},{\"category\":\"象山線\",\"destination\":\"北投,唭哩岸\",\"value\":2443992,\"latitude\":25.126189267610833,\"longitude\":121.50097945481562,\"name\":\"奇岩\"},{\"category\":\"象山線\",\"destination\":\"奇岩,石牌\",\"value\":2460145,\"latitude\":25.12075596145066,\"longitude\":121.50595992003909,\"name\":\"唭哩岸\"},{\"category\":\"象山線\",\"destination\":\"唭哩岸,明德\",\"value\":10731425,\"latitude\":25.11374960591821,\"longitude\":121.51607971980333,\"name\":\"石牌\"},{\"category\":\"象山線\",\"destination\":\"石牌,芝山\",\"value\":4115461,\"latitude\":25.10926628272268,\"longitude\":121.51915085480013,\"name\":\"明德\"},{\"category\":\"象山線\",\"destination\":\"明德,士林\",\"value\":8450270,\"latitude\":25.103513131170356,\"longitude\":121.52242499418868,\"name\":\"芝山\"},{\"category\":\"象山線\",\"destination\":\"芝山,劍潭\",\"value\":10631565,\"latitude\":25.0927643891729,\"longitude\":121.52644429901444,\"name\":\"士林\"},{\"category\":\"象山線\",\"destination\":\"士林,圓山\",\"value\":12982237,\"latitude\":25.083237733898592,\"longitude\":121.52457246775236,\"name\":\"劍潭\"},{\"category\":\"象山線\",\"destination\":\"劍潭,民權西路\",\"value\":9625107,\"latitude\":25.071598554189347,\"longitude\":121.5200613044141,\"name\":\"圓山\"},{\"category\":\"象山線\",\"destination\":\"圓山,雙連,大橋頭,中山國小\",\"value\":8093597,\"latitude\":25.06304673338914,\"longitude\":121.52076430573007,\"name\":\"民權西路\"},{\"category\":\"象山線\",\"destination\":\"民權西路,中山\",\"value\":8050997,\"latitude\":25.05777363899873,\"longitude\":121.52058095458283,\"name\":\"雙連\"},{\"category\":\"象山線\",\"destination\":\"雙連,台北車站,松江南京,北門\",\"value\":13429219,\"latitude\":25.052727609667468,\"longitude\":121.5210454135723,\"name\":\"中山\"},{\"category\":\"象山線\",\"destination\":\"中山,台大醫院,西門,善導寺\",\"value\":56541402,\"latitude\":25.045704251574737,\"longitude\":121.51746738302869,\"name\":\"台北車站\"},{\"category\":\"象山線\",\"destination\":\"台北車站,中正紀念堂\",\"value\":8029476,\"latitude\":25.043061200493536,\"longitude\":121.51617379840523,\"name\":\"台大醫院\"},{\"category\":\"象山線\",\"destination\":\"台大醫院,東門,小南門,古亭\",\"value\":9909434,\"latitude\":25.034615304356436,\"longitude\":121.51578676435011,\"name\":\"中正紀念堂\"},{\"category\":\"象山線\",\"destination\":\"中正紀念堂,大安森林公園,忠孝新生,古亭\",\"value\":8357374,\"latitude\":25.034354864675258,\"longitude\":121.52908368589351,\"name\":\"東門\"},{\"category\":\"象山線\",\"destination\":\"東門,大安\",\"value\":2688813,\"latitude\":25.033773135126964,\"longitude\":121.53607834658503,\"name\":\"大安森林公園\"},{\"category\":\"象山線\",\"destination\":\"大安森林公園,信義安和,科技大樓,忠孝復興\",\"value\":7502629,\"latitude\":25.034173951487908,\"longitude\":121.54382946815618,\"name\":\"大安\"},{\"category\":\"象山線\",\"destination\":\"大安,台北101/世貿\",\"value\":5466718,\"latitude\":25.03348707142364,\"longitude\":121.55374737770995,\"name\":\"信義安和\"},{\"category\":\"象山線\",\"destination\":\"信義安和,象山\",\"value\":10706955,\"latitude\":25.033348189042254,\"longitude\":121.56313053464383,\"name\":\"台北101/世貿\"},{\"category\":\"象山線\",\"destination\":\"台北101/世貿\",\"value\":3224520,\"latitude\":25.033107947037912,\"longitude\":121.57060188518842,\"name\":\"象山\"},{\"category\":\"松山線\",\"destination\":\"南京三民\",\"value\":6499492,\"latitude\":25.049936,\"longitude\":121.577499,\"name\":\"松山\"},{\"category\":\"松山線\",\"destination\":\"松山,台北小巨蛋\",\"value\":6568518,\"latitude\":25.051278,\"longitude\":121.563164,\"name\":\"南京三民\"},{\"category\":\"松山線\",\"destination\":\"南京三民,南京復興\",\"value\":6863568,\"latitude\":25.051502,\"longitude\":121.550804,\"name\":\"台北小巨蛋\"},{\"category\":\"松山線\",\"destination\":\"台北小巨蛋,松江南京\",\"value\":11382394,\"latitude\":25.052299,\"longitude\":121.544056,\"name\":\"南京復興\"},{\"category\":\"松山線\",\"destination\":\"南京復興,中山,行天宮,忠孝新生\",\"value\":11608206,\"latitude\":25.052590278940226,\"longitude\":121.53284690859087,\"name\":\"松江南京\"},{\"category\":\"松山線\",\"destination\":\"中山,西門\",\"value\":2173041,\"latitude\":25.049509,\"longitude\":121.510442,\"name\":\"北門\"},{\"category\":\"松山線\",\"destination\":\"北門,小南門,龍山寺,台北車站\",\"value\":25996825,\"latitude\":25.042592447711804,\"longitude\":121.5076223906673,\"name\":\"西門\"},{\"category\":\"松山線\",\"destination\":\"西門,中正紀念堂\",\"value\":2628119,\"latitude\":25.03520775260369,\"longitude\":121.51152490457372,\"name\":\"小南門\"},{\"category\":\"松山線\",\"destination\":\"中正紀念堂,台電大樓,東門,頂溪\",\"value\":11127515,\"latitude\":25.026721118582905,\"longitude\":121.52246868554359,\"name\":\"古亭\"},{\"category\":\"松山線\",\"destination\":\"古亭,公館\",\"value\":6900796,\"latitude\":25.020670567463036,\"longitude\":121.5276150917383,\"name\":\"台電大樓\"},{\"category\":\"松山線\",\"destination\":\"台電大樓,萬隆\",\"value\":10484665,\"latitude\":25.015166856269918,\"longitude\":121.53364431447334,\"name\":\"公館\"},{\"category\":\"松山線\",\"destination\":\"公館,景美\",\"value\":3095697,\"latitude\":25.00275889528097,\"longitude\":121.53838558044781,\"name\":\"萬隆\"},{\"category\":\"松山線\",\"destination\":\"萬隆,大坪林\",\"value\":5565966,\"latitude\":24.992911674888262,\"longitude\":121.54058125202731,\"name\":\"景美\"},{\"category\":\"松山線\",\"destination\":\"景美,七張\",\"value\":6794465,\"latitude\":24.983701290708538,\"longitude\":121.54135028829452,\"name\":\"大坪林\"},{\"category\":\"松山線\",\"destination\":\"大坪林,新店市公所,小碧潭\",\"value\":5252243,\"latitude\":24.976902498810848,\"longitude\":121.54264283875045,\"name\":\"七張\"},{\"category\":\"松山線\",\"destination\":\"七張,新店\",\"value\":4034552,\"latitude\":24.968063516643948,\"longitude\":121.5416422990787,\"name\":\"新店市公所\"},{\"category\":\"松山線\",\"destination\":\"新店市公所\",\"value\":3864465,\"latitude\":24.95808994523,\"longitude\":121.53791633305643,\"name\":\"新店\"},{\"category\":\"小碧潭線\",\"destination\":\"七張\",\"value\":834549,\"latitude\":24.973184054505506,\"longitude\":121.52995176738962,\"name\":\"小碧潭\"},{\"category\":\"新莊線\",\"destination\":\"丹鳳\",\"value\":2838810,\"latitude\":25.022415999439495,\"longitude\":121.41326363982289,\"name\":\"迴龍\"},{\"category\":\"新莊線\",\"destination\":\"迴龍,輔大\",\"value\":2651221,\"latitude\":25.02843757800273,\"longitude\":121.42247255020945,\"name\":\"丹鳳\"},{\"category\":\"新莊線\",\"destination\":\"丹鳳,新莊\",\"value\":4023932,\"latitude\":25.033450782532746,\"longitude\":121.4363438220628,\"name\":\"輔大\"},{\"category\":\"新莊線\",\"destination\":\"輔大,頭前庄\",\"value\":3981735,\"latitude\":25.035825848715977,\"longitude\":121.45241538119384,\"name\":\"新莊\"},{\"category\":\"新莊線\",\"destination\":\"新莊,先嗇宮\",\"value\":1552628,\"latitude\":25.040563888277095,\"longitude\":121.4620614955331,\"name\":\"頭前庄\"},{\"category\":\"新莊線\",\"destination\":\"頭前庄,三重\",\"value\":1275088,\"latitude\":25.04608082613471,\"longitude\":121.47186901161538,\"name\":\"先嗇宮\"},{\"category\":\"新莊線\",\"destination\":\"先嗇宮,菜寮\",\"value\":1432600,\"latitude\":25.05617845839815,\"longitude\":121.48475231098726,\"name\":\"三重\"},{\"category\":\"新莊線\",\"destination\":\"三重,台北橋\",\"value\":2944152,\"latitude\":25.060121612592418,\"longitude\":121.49152685789787,\"name\":\"菜寮\"},{\"category\":\"新莊線\",\"destination\":\"菜寮,大橋頭\",\"value\":3055519,\"latitude\":25.06328114245535,\"longitude\":121.50004559860108,\"name\":\"台北橋\"},{\"category\":\"新莊線\",\"destination\":\"台北橋,民權西路,三重國小\",\"value\":3756860,\"latitude\":25.06373404070847,\"longitude\":121.51328129340321,\"name\":\"大橋頭\"},{\"category\":\"新莊線\",\"destination\":\"民權西路,行天宮\",\"value\":5452338,\"latitude\":25.06278967218527,\"longitude\":121.52701198214868,\"name\":\"中山國小\"},{\"category\":\"新莊線\",\"destination\":\"中山國小,松江南京\",\"value\":9074712,\"latitude\":25.060385176500407,\"longitude\":121.53301136372986,\"name\":\"行天宮\"},{\"category\":\"新莊線\",\"destination\":\"松江南京,東門,善導寺,忠孝復興\",\"value\":10932739,\"latitude\":25.04132422142765,\"longitude\":121.5331404970122,\"name\":\"忠孝新生\"},{\"category\":\"新莊線\",\"destination\":\"古亭,永安市場\",\"value\":12397310,\"latitude\":25.01418319987067,\"longitude\":121.51508243232104,\"name\":\"頂溪\"},{\"category\":\"新莊線\",\"destination\":\"頂溪,景安\",\"value\":8986278,\"latitude\":25.002258265003643,\"longitude\":121.51086319040049,\"name\":\"永安市場\"},{\"category\":\"新莊線\",\"destination\":\"永安市場,南勢角\",\"value\":8602761,\"latitude\":24.993631363006962,\"longitude\":121.50446669788721,\"name\":\"景安\"},{\"category\":\"新莊線\",\"destination\":\"景安\",\"value\":7078806,\"latitude\":24.989444023002928,\"longitude\":121.50969518047064,\"name\":\"南勢角\"},{\"category\":\"新莊線\",\"destination\":\"三民高中\",\"value\":3795231,\"latitude\":25.091868170028665,\"longitude\":121.46440083883546,\"name\":\"蘆洲\"},{\"category\":\"新莊線\",\"destination\":\"蘆洲,徐匯中學\",\"value\":4120666,\"latitude\":25.085783608283265,\"longitude\":121.47374121828064,\"name\":\"三民高中\"},{\"category\":\"新莊線\",\"destination\":\"三民高中,三和國中\",\"value\":4212804,\"latitude\":25.080419161492774,\"longitude\":121.48050794588488,\"name\":\"徐匯中學\"},{\"category\":\"新莊線\",\"destination\":\"徐匯中學,三重國小\",\"value\":3854639,\"latitude\":25.077014839941405,\"longitude\":121.48690286864445,\"name\":\"三和國中\"},{\"category\":\"新莊線\",\"destination\":\"三和國中,大橋頭\",\"value\":3955988,\"latitude\":25.070697554065045,\"longitude\":121.49700019112188,\"name\":\"三重國小\"},{\"category\":\"新北投線\",\"destination\":\"北投\",\"value\":2469669,\"latitude\":25.13696352369984,\"longitude\":121.50357182773016,\"name\":\"新北投\"},{\"category\":\"板南線\",\"destination\":\"永寧\",\"value\":1028148,\"latitude\":24.959372,\"longitude\":121.419839,\"name\":\"頂埔\"},{\"category\":\"板南線\",\"destination\":\"頂埔,土城\",\"value\":4981894,\"latitude\":24.9674932113021,\"longitude\":121.43687188829537,\"name\":\"永寧\"},{\"category\":\"板南線\",\"destination\":\"永寧,海山\",\"value\":2375424,\"latitude\":24.97370641303123,\"longitude\":121.44526821215956,\"name\":\"土城\"},{\"category\":\"板南線\",\"destination\":\"土城,亞東醫院\",\"value\":6986841,\"latitude\":24.98608212150263,\"longitude\":121.44912906948888,\"name\":\"海山\"},{\"category\":\"板南線\",\"destination\":\"海山,府中\",\"value\":5932751,\"latitude\":24.998430272252545,\"longitude\":121.45278560939134,\"name\":\"亞東醫院\"},{\"category\":\"板南線\",\"destination\":\"亞東醫院,板橋\",\"value\":9727495,\"latitude\":25.00920755948102,\"longitude\":121.45896319520041,\"name\":\"府中\"},{\"category\":\"板南線\",\"destination\":\"府中,新埔\",\"value\":14430866,\"latitude\":25.014246964228615,\"longitude\":121.46307189637238,\"name\":\"板橋\"},{\"category\":\"板南線\",\"destination\":\"板橋,江子翠\",\"value\":13263561,\"latitude\":25.0242227306081,\"longitude\":121.46805003805972,\"name\":\"新埔\"},{\"category\":\"板南線\",\"destination\":\"新埔,龍山寺\",\"value\":8597630,\"latitude\":25.031254750642308,\"longitude\":121.47317661154487,\"name\":\"江子翠\"},{\"category\":\"板南線\",\"destination\":\"江子翠,西門\",\"value\":9568356,\"latitude\":25.035613710603233,\"longitude\":121.50172390867709,\"name\":\"龍山寺\"},{\"category\":\"板南線\",\"destination\":\"台北車站,忠孝新生\",\"value\":7433989,\"latitude\":25.044651419624493,\"longitude\":121.52491851636798,\"name\":\"善導寺\"},{\"category\":\"板南線\",\"destination\":\"忠孝新生,忠孝敦化,大安,南京東路\",\"value\":18450132,\"latitude\":25.04203860772285,\"longitude\":121.54400610324738,\"name\":\"忠孝復興\"},{\"category\":\"板南線\",\"destination\":\"忠孝復興,國父紀念館\",\"value\":14467127,\"latitude\":25.04202467886131,\"longitude\":121.54918621366606,\"name\":\"忠孝敦化\"},{\"category\":\"板南線\",\"destination\":\"忠孝敦化,市政府\",\"value\":8407575,\"latitude\":25.04150739977713,\"longitude\":121.55786377815248,\"name\":\"國父紀念館\"},{\"category\":\"板南線\",\"destination\":\"國父紀念館,永春\",\"value\":21006961,\"latitude\":25.041356794613534,\"longitude\":121.5671471190174,\"name\":\"市政府\"},{\"category\":\"板南線\",\"destination\":\"市政府,後山埤\",\"value\":6636153,\"latitude\":25.04118291639793,\"longitude\":121.57684137571806,\"name\":\"永春\"},{\"category\":\"板南線\",\"destination\":\"永春,昆陽\",\"value\":6108639,\"latitude\":25.045670951722684,\"longitude\":121.58246148405738,\"name\":\"後山埤\"},{\"category\":\"板南線\",\"destination\":\"後山埤,南港\",\"value\":5096387,\"latitude\":25.05065304944464,\"longitude\":121.5939109544869,\"name\":\"昆陽\"},{\"category\":\"板南線\",\"destination\":\"昆陽,南港展覽館\",\"value\":3805116,\"latitude\":25.051907460763918,\"longitude\":121.60757937916433,\"name\":\"南港\"},{\"category\":\"板南線\",\"destination\":\"南港,南港軟體園區\",\"value\":9748108,\"latitude\":25.054292360817396,\"longitude\":121.61829798308524,\"name\":\"南港展覽館\"},{\"category\":\"木柵線\",\"destination\":\"木柵\",\"value\":3044382,\"latitude\":24.998026582423858,\"longitude\":121.57938279367275,\"name\":\"動物園\"},{\"category\":\"木柵線\",\"destination\":\"動物園,萬芳社區\",\"value\":1468174,\"latitude\":24.99834327844397,\"longitude\":121.57341773203534,\"name\":\"木柵\"},{\"category\":\"木柵線\",\"destination\":\"木柵,萬芳醫院\",\"value\":679263,\"latitude\":24.998571312962294,\"longitude\":121.56843209997312,\"name\":\"萬芳社區\"},{\"category\":\"木柵線\",\"destination\":\"萬芳社區,辛亥\",\"value\":4936632,\"latitude\":24.999428919037957,\"longitude\":121.55761179107918,\"name\":\"萬芳醫院\"},{\"category\":\"木柵線\",\"destination\":\"萬芳醫院,麟光\",\"value\":1036427,\"latitude\":25.00483244564729,\"longitude\":121.55690116575565,\"name\":\"辛亥\"},{\"category\":\"木柵線\",\"destination\":\"辛亥,六張犁\",\"value\":1347152,\"latitude\":25.018729506886544,\"longitude\":121.5586720181106,\"name\":\"麟光\"},{\"category\":\"木柵線\",\"destination\":\"麟光,科技大樓\",\"value\":3810615,\"latitude\":25.023906432329177,\"longitude\":121.55268736521725,\"name\":\"六張犁\"},{\"category\":\"木柵線\",\"destination\":\"六張犁,大安\",\"value\":4919458,\"latitude\":25.026200761477245,\"longitude\":121.5436202973704,\"name\":\"科技大樓\"},{\"category\":\"木柵線\",\"destination\":\"忠孝復興,中山國中\",\"value\":0,\"latitude\":25.05246670082959,\"longitude\":121.54458646314434,\"name\":\"南京東路\"},{\"category\":\"木柵線\",\"destination\":\"南京東路,松山機場\",\"value\":5188030,\"latitude\":25.060747277719585,\"longitude\":121.54398197424821,\"name\":\"中山國中\"},{\"category\":\"木柵線\",\"destination\":\"中山國中,大直\",\"value\":1941615,\"latitude\":25.06292741738884,\"longitude\":121.55154361142459,\"name\":\"松山機場\"},{\"category\":\"木柵線\",\"destination\":\"松山機場,劍南路\",\"value\":3299642,\"latitude\":25.079383080468826,\"longitude\":121.5472390347856,\"name\":\"大直\"},{\"category\":\"木柵線\",\"destination\":\"大直,西湖\",\"value\":4019345,\"latitude\":25.08429686795415,\"longitude\":121.55609333110183,\"name\":\"劍南路\"},{\"category\":\"木柵線\",\"destination\":\"劍南路,港墘\",\"value\":5049691,\"latitude\":25.08191879018757,\"longitude\":121.56729504318322,\"name\":\"西湖\"},{\"category\":\"木柵線\",\"destination\":\"西湖,文德\",\"value\":4512517,\"latitude\":25.08006749154739,\"longitude\":121.57465625483762,\"name\":\"港墘\"},{\"category\":\"木柵線\",\"destination\":\"港墘,內湖\",\"value\":1802851,\"latitude\":25.07840561715722,\"longitude\":121.58443657673885,\"name\":\"文德\"},{\"category\":\"木柵線\",\"destination\":\"文德,大湖公園\",\"value\":2771019,\"latitude\":25.08346070952129,\"longitude\":121.5947729759553,\"name\":\"內湖\"},{\"category\":\"木柵線\",\"destination\":\"內湖,葫洲\",\"value\":1175326,\"latitude\":25.08323658631349,\"longitude\":121.60211247187017,\"name\":\"大湖公園\"},{\"category\":\"木柵線\",\"destination\":\"大湖公園,東湖\",\"value\":2697329,\"latitude\":25.07247697850255,\"longitude\":121.607374729096,\"name\":\"葫洲\"},{\"category\":\"木柵線\",\"destination\":\"葫洲,南港軟體園區\",\"value\":2860152,\"latitude\":25.066998936636793,\"longitude\":121.6120277324138,\"name\":\"東湖\"},{\"category\":\"木柵線\",\"destination\":\"東湖,南港展覽館\",\"value\":1153195,\"latitude\":25.0602201906364,\"longitude\":121.6164263142358,\"name\":\"南港軟體園區\"},{\"category\":\"貓空纜車\",\"destination\":\"貓纜動物園內\",\"value\":1040089,\"latitude\":24.99616781334791,\"longitude\":121.57640393994332,\"name\":\"貓纜動物園\"},{\"category\":\"貓空纜車\",\"destination\":\"貓纜動物園,貓纜指南宮\",\"value\":229797,\"latitude\":24.99013963354039,\"longitude\":121.58714464652805,\"name\":\"貓纜動物園內\"},{\"category\":\"貓空纜車\",\"destination\":\"貓纜動物園內,貓纜貓空\",\"value\":126391,\"latitude\":24.979131927095835,\"longitude\":121.58978777949397,\"name\":\"貓纜指南宮\"},{\"category\":\"貓空纜車\",\"destination\":\"貓纜指南宮\",\"value\":1254243,\"latitude\":24.968351099381863,\"longitude\":121.58826045600098,\"name\":\"貓纜貓空\"}],\n  dimension: {\n    name: { type: [], require: true, desc: \"name of station\" },\n    longitude: {type: [plotdb.Number], require: false, desc: \"longitude of station\"}, \n    latitude: {type: [plotdb.Number], require: false, desc: \"latitude of station\"},\n    value: {type: [plotdb.Number], require: false, desc: \"circle radius of station\"},\n    destination: {type: [], require: true, desc: \"comma separated names of destination station\"},\n    date: {type: [plotdb.Date], require: false, desc: \"operational date\"},\n    category: {type: [], require: false, desc: \"category of this station\"}\n  },\n  config: {\n    padding: { name: \"Padding\", type: [plotdb.Number], default: 10, rebindOnChange: true },\n    margin: { name: \"Margin\", type: [plotdb.Number], default: 10},\n    palette: { name: \"Palette\", type: [plotdb.Palette], default: plotdb.Palette[\"default\"]}\n  },\n  init: function() {\n    var that = this;\n    this.svg = d3.select(this.root).append(\"svg\");\n    this.sites = this.data.map(function(it) { return it.name; });\n    this.valuerange = this.data.map(function(it) { return it.value; });\n    this.links = [];\n    this.sitemap = {}\n    for(var idx = 0; idx < this.data.length; idx++) {\n      this.sitemap[this.data[idx].name] = this.data[idx];\n    }\n    for(var idx = 0; idx < this.data.length; idx++) {\n      var item = this.data[idx];\n      console.log(item);\n      item.x = item.longitude;\n      item.y = item.latitude;\n      var nodes = (this.data[idx].destination || \"\").split(\",\").map(function(it) {\n        return that.sitemap[it];\n      }).filter(function(it) { return it; });\n      for(var jdx = 0; jdx < nodes.length; jdx++) {\n        this.links.push({source: this.data[idx], target: nodes[jdx]});\n      }\n    }\n    this.xextent = d3.extent(this.data.map(function(it) { return it.x; }));\n    this.yextent = d3.extent(this.data.map(function(it) { return it.y; }));\n    console.log(this.data);\n  },\n  bind: function() {\n    var that = this;\n    this.lines = this.svg.selectAll(\"line.connect\")\n      .data(this.links)\n      .enter().append(\"line\").attr({\"class\": \"connect\"});\n    this.circles = this.svg.selectAll(\"circle.data.node\")\n      .data(this.data)\n      .enter().append(\"circle\").attr({\"class\":\"data node\"});\n  },\n  resize: function() {\n    var that = this;\n    var box = this.root.getBoundingClientRect();\n    var width = this.width = box.width;\n    var height = this.height = box.height - 10;\n    var m = this.config.margin;\n    this.size = (width > height? height : width ) - 2 * m;\n    this.svg.attr({\n      width: width + \"px\", height: height + \"px\",\n      viewBox: [0,0,width,height].join(\" \"),\n      preserveAspectRatio: \"xMidYMid\"\n    });\n    this.xscale = d3.scale.linear().domain(this.xextent).range([\n        (width - this.size)/2, (width + this.size)/2\n    ]);\n    this.yscale = d3.scale.linear().domain(this.yextent).range([\n        (height + this.size)/2, (height - this.size)/2\n    ]);\n    this.colors = d3.scale.ordinal().range(this.config.palette.colors.map(function(it) { return it.hex; }));\n    /*this.force = d3.layout.force().size([width,height])\n      .gravity(0.08)\n      .charge(-100)\n      .friction(0.8)\n      .nodes(this.data)\n      .links(this.links)\n      .on(\"tick\", function(it) { that.tick(); });\n    this.force.start();*/\n  },\n  tick: function() {\n    this.render();\n  },\n  render: function() {\n    var that = this;\n    this.circles.attr({\n      cx: function(it) { return that.xscale(it.x); },\n      cy: function(it) { return that.yscale(it.y); },\n      r : function(it) { return 6; },\n      fill: \"#fff\",\n      stroke: function(it) { return that.colors(it.category); }\n    });\n    this.lines.attr({\n      x1: function(it) { return that.xscale(it.source.x); },\n      x2: function(it) { return that.xscale(it.target.x); },\n      y1: function(it) { return that.yscale(it.source.y); },\n      y2: function(it) { return that.yscale(it.target.y); },\n      stroke: function(it) { return that.colors(it.source.category); },\n      \"stroke-width\": 2\n    });\n  }\n});","lines":102,"size":18992},"assets":[],"isType":false,"createdTime":1457073272435,"modifiedTime":1458279156665,"ownerName":"Kirby Wu","likes":0,"parent":null,"basetype":"10","visualencoding":["99"],"category":["1","2","4"]}